Version 1.50.19 - Released 
=========================================

  * bug fix: webapp-config-1.50.16 errors out during uninstall if
	     htdocs is a symlink (Gentoo bug #181938)
  * bug fix: Check for Apache fixed to www-servers category

Version 1.50.18 - Released 
=========================================

Version 1.50.17 - Released 
=========================================

Version 1.50.16 - Released 
=========================================

Version 1.50.15 - Released 19th July 2006
=========================================

  * enhancement: Added script webapp-cleaner.

Version 1.50.14 - Released 20th April 2006
==========================================

  * bug fix: Added types import (Gentoo bug #126534)
  * bug fix: Added support for splitting hostnames into
    subdomains. (Gentoo bug #126486)
  * enhancement: Added cherokee	support (Gentoo bug #129359)
  * bug fix: Added -D and -E description.  Fixed upgrade
	instructions (Gentoo bug #129167)

Version 1.50.13 - Released 06th March 2006
==========================================

  * bug fix: amd64 libdir fix (Gentoo bug #125156)

Version 1.50.12 - Released 06th March 2006
==========================================

  * bug fix: amd64 libdir fix (Gentoo bug #125156)

Version 1.50.11 - Released 04th March 2006
==========================================

  * bug fix: Fixed package detection.

Version 1.50.10 - Released 30th January 2006
============================================

  * bug fix: Both vhost_config_virtual_files and
    vhost_config_default_dirs were ignored. Fixed.
  * bug fix: Fixed pass-through of the server variable and modified
    the uid/gid extraction to result in readable names.
  * bug fix: Showing the instructions now includes the server
    argument.

Version 1.50.9 - Released 27th January 2006
===========================================

  * enhancement: Allowing config-server-owned.
  * bug fix: Fix for recognizing config protected files.
  * bug fix: Fixed error message for a problematic configuration
    configuration file.
  * bug fix: Fixed behaviour for upgrades. Now shows upgrade
    instructions.

Version 1.50.7 - Released 9th January 2006
==========================================

  * bug fix: Another correction to symlinks. We now support broken
    links.
  * bug fix: Fix for variables VHOST_SERVER_xID.
  * bug fix: Adapted running hooks
  * bug fix: Fixed documentation of "--list-installs"

Version 1.50.6 - Released 4th January 2006
==========================================

  * bug fix: Removed a problematic doctest so that src_test will work.

Version 1.50.5 - Released 4th January 2006
==========================================

  * bug fix: Fixed trailing slashes for the -d flag (Gentoo bug
    #115765)
  * enhancement: Support for symlinked directories.
  * enhancement: Ebuild now provides src_test.

Version 1.50.3 - Released 12th December 2005
============================================

  * bug fix: Removed "root" references for BSD.
  * bug fix: Fixed handling of content file between upgrades.

Version 1.50.2 - Released 05th December 2005
============================================

  * bug fix: Reverted hook logic.
  * bug fix: Added MY_HOSTROOTDIR to the exported variables.

Version 1.50.1 - Released 05th December 2005
============================================

  * bug fix: fixed problem with missing hook directories.

Version 1.50.0 - Released 24th November 2005
============================================

  * rewrite in python

Version 1.11-r1 - Released 20st July 2005
=========================================

  * bug fix: webapp-config removes all '//' occurances from the install
    directory name
    - Ensures we don't add otherwise duplicate strings into the database
      of what is installed where
  * bug fix: webapp-config no longer reads .webapp files twice during
    upgrades
    - Should fix problems of an upgrade removing the wrong version of
      an app
  * bug fix: webapp-config no longer appends to .webapp files
    - Should fix numerous reported problems
  * bug fix: $PN and $PVR are exported for hook scripts
  * bug fix: --pretend no longer modifies the .webapp file
  * bug fix: users can change VHOSTS_HTDOCS_INSECURE, and webapp-config will
    notice
  * bug fix: users can change VHOSTS_HTDOCS_SECURE, and webapp-config will
    notice
  * bug fix: webapp-config will select the correct target directory when
    --secure is used

Version 1.11 - Released 30th May 2005
=====================================

  * r12, r13 and r14 were released separately by Gentoo
  * v1.11 incorporates the changes made by Gentoo
    - fix for creating path-to-dir w/ permissions 777
      - replaced with own fix
    - fix for insecure creation of temporary files
      - replaced with fix from vapier@gentoo.org
    - replaced deprecated qpkg with equery (yuck)
      - added as-is
  * bug fix: no longer uses 'id -g' to work out the default group
    - updated sbin/webapp-config
    - see Gentoo bug #60155
    - tested & ready for release
  * bug fix: change 'etc-upgrade' to 'etc-update' in the man page
    - updated doc/webapp-config.8.xml
    - see Gentoo bug #53390
    - tested & ready for release
  * bug fix: webapp-config runs with the default umask, except when
    adding files into their destination directories
    - updated sbin/webapp-config
    - see Gentoo bug #53390
    - also fixes Gentoo bug #91785
  * bug fix: changed default permissions on .webapp files to be '0600'
    - also changes default permissions for files in /var/db/webapps
    - see Gentoo bug #71228
    - tested & ready for release
  * bug fix: make the default output more verbose than it currently is
    - updated sbin/webapp-config
    - updated lib/servers/basic.sh
    - see Gentoo bug #64684
    - tested & ready for release
  * bug fix: --list-servers works now
    - updated sbin/webapp-config
    - see Gentoo bug #69463
    - tested & ready for release
  * bug fix: cope with too many protected files
    - updated sbin/webapp-config
    - see Gentoo bug #73520
    - tested & ready for release
  * bug fix: --pretend does not create any directories any more
    - updated sbin/webapp-config
    - see Gentoo bug #80535
    - tested & ready for release
  * bug fix: --bug-report needs to automatically switch on --verbose
    - updated sbin/webapp-config
    - see Gentoo bug #82655
    - tested & ready for release
  * bug fix? ensure we overwrite old files left behind by broken users
    - see Gentoo bug #89821
  * bug fix: incorrect instructions for removing an app
    - updated doc/webapp-config.8.xml
    - see Gentoo bug #90157
    - tested & ready for release
  * bug fix: webapp-config no longer goes around resetting the write
    permissions of directories it is not responsible for
    - bug added in v1.10-r14
    - see Gentoo bug #92388
    - tested & ready for release
  * bug fix: webapp.eclass installs SQL files as only readable by root
    - prevents non-root users stealing passwords listed in these files
    - updated eclass/webapp.eclass
    - tested & ready for release
  * bug fix: --list-installs output included cruft which broke emerge -C
    - updated sbin/webapp-config
  * enhancement: added support for postupgrade-en.txt files
    - updated sbin/webapp-config, doc/webapp-config.5.xml
    - see Gentoo bug #53585
  * enhancement: added support for other webservers installed under gentoo
    - added lib/servers/aolserver.sh
    - added lib/servers/lighttpd.sh
    - added a generic 'basic.sh' for servers which seem to run as root
    - moved lib/servers/apache-basic.sh to be lib/servers/apache.sh
    - updated config/webapp-config to default to 'apache'
    - tested & ready for release
  * enhancement: added short aliases for some of the longer options
    - updated sbin/webapp-config
    - updated doc/webapp-config.8.xml
    - see Gentoo bug #76767
    - tested & ready for release
  * enhancement: removed support for 'runbycgibin'
    - never really worked in the first place
    - this is best done by setting up an appropriate handler in your webserver
    - updated sbin/webapp-config
    - updated config/webapp-config
    - updated doc/webapp-config.eclass.5.xml

Version 1.10-r11 - Released 19th September 2004
===============================================

  * version bump: changed version to 1.10-r11
    - updated sbin/webapp-config
  * enhancement: support for amd64 platform
    - updated sbin/webapp-config
  * bug fix: missing libsh_einfo on line 359
    - see http://bugs.gentoo.org/62845
    - updated sbin/webapp-config

Version 1.10-r10 - Released 19th August 2004
============================================

  * version bump: changed version to 1.10-r10
    - updated sbin/webapp-config
    - updated config/webapp-config
  * enhancement: VHOST_SERVER variable now exported
    - contains whatever's passed to webapp-config w/ the -s switch
    - no use to anyone, as -s can only contain 'apache-basic' right now :)
    - updated sbin/webapp-config
    - updated docs/webapp.eclass.5.xml
  * bug fix: VHOST_PERMS misspelt as VHOSTS_PERMS :(
    - updated config/webapp-config
  * bug fix: default for VHOST_PERMS_VIRTUAL_FILE was 'o-x', should be 'o-w'
    - updated sbin/webapp-config
    - updated config/webapp-config to be config v5

Version 1.10-r9 - Released 19th August 2004
===========================================

  * enhancement: you can now control the permissions used for the directory
    that webapp-config installs into by changing the config file
    - updated sbin/webapp-config
    - updated config/webapp-config
    - updated lib/servers/apache-basic.sh
    - updated doc/webapp-config.5.xml
  * enhancement: we now export more variables for use in hook functions
    and the post-installation instructions
    - updated sbin/webapp-config
    - updated doc/webapp-config.8.xml
  * feature change: webapp-config is no longer chatty
    - by popular request
    - updated sbin/webapp-config
    - updated lib/libsh.sh
    - updated lib/servers/apache-basic.sh
  * bug fix: no more installing virtual files with '0' permissions
    - we now pick up the permissions from the master copy of the file
    - updated sbin/webapp-config
  * bug fix: only add directories that we really need to the contents file
    - updated sbin/webapp-config

Version 1.10-r8 - Released 16th August 2004
===========================================

  * version changed to 1.10-r8
    - updated sbin/webapp-config
  * bug fix: installed 'virtual' files cannot always be set '644'
    - prevents executables installed in the cgi-bin directory from working
    - updated sbin/webapp-config
    - updated config/webapp-config

Version 1.10-r7 - Released 12th August 2004
===========================================

A big thanks to dju` (http://dju.elegiac.net/) for pointing out that these
changes were needed.

  * version changed to 1.10-r7
    - updated sbin/webapp-config
  * enhancement: permissions for files and directories can now be set from
    the config file
    - updated sbin/webapp-config
    - updated config/webapp-config
    - updated doc/webapp-config.5.xml
  * bug fix: .webapp files are no longer created 666
    - updated sbin/webapp-config

Version 1.10-r6 - Released 8th August 2004
==========================================

8th August 2004
---------------

  * version bump to 1.10-r6
    - updated sbin/webapp-config

  * bug fix: files containing a '+' in the name are now uninstalled correctly
    - bug was caused by using egrep in fn_getcontentsline()
    - updated sbin/webapp-config to use regular grep
    - thanks to Dietrich Heise <dietrich@pegestorf.de> for the bug report

6th August 2004
---------------

  * reverted the configuration change for the default user and group of
    config-owned files
    - the 'nobody' user is reserved for NFS root_squash

31st July 2004
--------------

  * configuration change: the default user and group for config-owned files
    is now 'nobody'
    - updated config/webapp-config
    - updated sbin/webapp-config

28th July 2004
--------------

  * bug fix: when creating a directory, test for a 'virtual' parent *before*
    trying to delete any directories from disk
    - updated sbin/webapp-config

22nd July 2004
--------------

  * enhancement: directories that already exist are now handled better
    - ownership and permissions on existing directories are now changed
    - removing warning messages
    - updated sbin/webapp-config
  
18th July 2004
--------------

  * bug fix: fix fir 'libse_enotice: command not found'
    - updated sbin/webapp-config

Version 1.10-r5 - Released 11th July 2004
=========================================

11th July 2004
--------------

  * bug fix: config-file protection wasn't working
    - never worked if you were re-installing the same package
    - broken for everyone else when I made webapp-config safe to use with
      directories containing spaces in them
    - updated sbin/webapp-config

8th July 2004
-------------

  * version bump: 1.10-r5
  * enhancement: many more variables exported for hook scripts, and now for use
    in post-install texts too
    - updated sbin/webapp-config
    - updated eclass/webapp.eclass.5

Version 1.10-r4 - Released 7th July 2004
========================================

7th July 2004
-------------

  Hrm.  All the fixes listed below as being in -r3 never made it into the
  final tarball.  This was due to a mixup between my laptop (where all the
  dev work is done) and my desktop (where testing and releases occur).

  So -r4 is what -r3 should have been.
  
Version 1.10-r3 - Released 28th June 2004
=========================================

28th June 2004
--------------

  * bug fix: hook scripts were called with parameters of 'start' and 'stop'
    instead of 'install' and 'clean'
    - updated sbin/webapp-config

27th June 2004
--------------

  * version changed to 1.10-r3
    - updated sbin/webapp-config

  * bug fix: tightening up umasks
    - server-owned files are now created with mode 660
    - updated sbin/webapp-config

  * bug fix: incorrect references to 'webapp.ebuild' in SEE ALSO sections
    of the manuals
    - updated doc/webapp-config.5.xml
    - updated doc/webapp.eclass.5.xml

  * bug fix: changing VHOST_HTDOCS_INSECURE broke webapp-config
    - updated config/webapp-config

23rd June 2004
--------------

  * version change to v1.10-r2
    - updated sbin/webapp-config
  * bug fix: --secure attempts to install files from /usr/share/webapps/<pn>/
    <pvr>/htdocs-secure, which doesn't exist (Gentoo bug #??)
    - updated config/webapp-config
  * bug fix: the examples for webapp-config -I used -d with full directory
    paths (Gentoo bug #52888)
    - the XML was correct
    - re-generated the man pages (grrr)
  * bug fix: you can't use webapp-config -U to upgrade from one unrelated
    package to another (Gentoo bug #?)
    - you can only upgrade to a different version of the same package
    - updated sbin/webapp-config

14th June 2004
--------------

  * bug fix: fn_add_contents() didn't cope with files and directories that
    contained spaces (Gentoo bug #53215)
    - updated sbin/webapp-config
    - thanks to Sven Wegener for the fix

  * enhancement: internal file-type cache re-written to improve performance
    - also simplifies support for files & directories with spaces in the
      name
    - also makes XML metadata file support easier to add
    - updated sbin/webapp-config

13th June 2004
--------------

  * bug fix: files always copied, never hard-linked (Gentoo bug #53809)
   - fixed in sbin/webapp-config
   - thanks to Sven Wegener for the bug report & fix

 * bug fix: --help broke (Gentoo bug #53794)
   - fixed in sbin/webapp-config
   - thanks to Sven Wegener for the bug report & fix
   
 * bug fix: config-owned / server-owned files always installed as virtual
   (Gentoo bug #53806)
   - fixed in sbin/webapp-config
   - fixed in eclass/webapp.eclass
   - thanks to Sven Wegener for the bug report once more!

11th June 2004
--------------

  * bug fix: the examples for webapp-config -I used -d with full directory
    paths (Gentoo bug #52888)
    - updated doc/webapp-config.8.xml

Version 1.10 - Released 11th June 2004
======================================

11th June 2004
--------------

  * bug fix: webapp-config needs to support installing files w/
    spaces in the name (Gentoo bug #53215)
    - wow - this needed fixing all over the place.  Quite an eye-opener on
      just how many unquoted parameters were being used
    - updated sbin/webapp-config
    - updated lib/libsh.sh
    - updated eclass/webapp.eclass
    - updated lib/servers/apache-basic.sh

  * bug fix: webapp-config needs to set umask 0 when running
    (Gentoo bug #53390)
    - updated sbin/webapp-config

  * documentation improvement:
    - standardised on 'master copy' and 'virtual copy' as the terms to
      use to mean files under /usr/share/webapps and /var/www respectively
    - updated doc/webapp-config.8.xml

  * enhancement: hard linking now documented
    - updated doc/webapp-config.8.xml to cover --soft switch
    - updated doc/webapp-config.8.xml to explain how to get the most out
      of hard linking

  * enhancement: --secure switch to install into /var/www/<host>/htdocs-secure
    (Gentoo bug #53384)
    - updated doc/webapp-config.8.xml to list --secure switch
    - updated sbin/webapp-config to support --secure
    - updated config/webapp-config to support VHOST_HTDOCS_INSECURE and
      VHOST_HTDOCS_SECURE config options
    - updated doc/webapp-config.5.xml to document VHOST_HTDOCS_INSECURE and
      VHOST_HTDOCS_SECURE config options

4th June 2004
-------------

  * enhancement: --bug-report now runs all mode-specific checks before
    quitting

  * enhancement: hard linking now supported
    - by default, webapp-config will now try to hard-link in a file, and
      will then try to copy the file if the hard link fails
    
      many users have found the use of symlinks confusing
      many users have objected to having cgi-bin's symlinked in
      some popular packages will not work when their files are symlinked
      rather than hard-linked

      softlinking now has to be explicitly asked for with a --soft switch
      (I'll make it so that this can also be set in the config file)

    - updated sbin/webapp-config
      - support hard-linking files by default
      - new --soft switch if you would prefer to use symlinks instead
    - TODO: update doc/webapp-config.8.xml to document new --soft option

    - updated config/webapp-config to add new VHOST_LINK_TYPE config variable
    - TODO: update doc/webapp-config.8.xml to add a new section discussing
      soft links vs hard links

28th May 2004
-------------

  * version changed to 1.10dev

  * enhancement: checks to ensure that the config file matches the version
    of webapp-config
    - sanity checks to ensure that the user is not trying to use webapp-config
      with a broken config-file ... or an older config file that hasn't been
      updated when webapp-config was updated!
    - added WA_CONFIG_VERSION to config/webapp-config
    - added --check-config to sbin/webapp-config
    - updated sbin/webapp-config to always do --check-config

  * cosmetic: fatal error message is now prefixed with 'Fatal error: ' string
    to make it even more obvious what the problem is
    - updated lib/libsh.sh

27th May 2004
-------------

  * bug fix: documentation errors
    - webapp_pkg_setup() was documented as preparing ${D} for ebuilds.  This
      used to be the case, but is now done in webapp_pkg_preinst().
    - examples and documentation go into /usr/share/doc, not /usr/doc
    - updated doc/webapp.eclass.5.xml

Version 1.9-r3 - 25th May 2004
------------------------------

  * version change to 1.9-r3
    - updated sbin/webapp-config

  * enhancement: export more environment variables for the hook scripts
    - updated sbin/webapp-config to export a few VHOST_* variables
    - updated doc/webapp.eclass.5.xml to document the exported variables

22nd May 2004
-------------

  * workaround: portage-2.0.51 does not call src_install() and pkg_postinst()
    inside the same shell instance
    - updated webapp.eclass to create an empty file during src_install(),
      and to look for that file at the start of pkg_postinst()
  * behaviour change: if you already have something in /var/www/localhost/$PN,
    webapp.eclass will now overwrite whatever is in there
    - requested after discussion on gentoo-core mailing list

20th May 2004 (changes for webapp-config-1.10)
----------------------------------------------

  * Work in progress: XML support
    - added xslt/to-bash.xsl: stylesheet for transforming contents of the
      XML metadata file into a set of bash function calls
    - next step is to implement the callback functions
  * Enhancement: use hard-linking if available
    - lots of updates to sbin/webapp-config to support hard-linking
    - we use hard-linking if we can, and fallback to symlinks if we
      cannot
  * Enhancement: support copying files instead of linking them
    - some apps (in particular some PHP-based ones) don't work correctly
      if they are symlinked in
    - updated sbin/webapp-config to support copying 'virtual' files rather
      than linking to them
    - update sbin/webapp-config to turn 'virtual' directories into real
      ones
    - update eclass/webapp.eclass to allow setting meta options on packages
      such as the new virtualise option
    - update doc/webapp.eclass.5.xml to document the new metadata

Version 1.9-r2 - 19th May 2004
==============================

A bug fix release.

  * Version changed to 1.9-r2
    - updated sbin/webapp-config

  * Bug fix: fn_run_hooks() now makes sure that the script is executable
    before trying to execute it
    - updated sbin/webapp-config

Version 1.9-r1 - 18th May 2004
==============================

A bug-fix release.

  * Version changed to 1.9-r1
    - updated sbin/webapp-config

  * Fix for fn_run_hooks() looking in the wrong place
    - updated sbin/webapp-config - now uses MY_HOOKSCRIPTSDIR rather
      than MY_HOOKSCRIPTDIRS
    - thanks to Sven Wegener <sven.wegener@stealer.net> for spotting
      this one

  * Fix for fn_run_hooks() not exporting an environment to the hook scripts
    - updated sbin/webapp-config - now exports a few variables which should
      help the people who need this
    - updated doc/webapp.eclass.5.xml to document the variables exported to
      the hook scripts

Version 1.9 - 17th May 2004
===========================

17th May 2004
-------------

  * Version changed to 1.9
    - updated sbin/webapp-config

  * Enhancement: post-install (and pre-remove) script hook
    - you can supply a script that will be executed after the installation
      of a virtual copy, and immediately before the removal of a virtual copy
    - updated eclass/webapp.eclas - add new function webapp_hook_script()
    - updated config/webapp-config - add MY_HOOKSCRIPTSDIR variable
    - updated sbin/webapp-config - call webapp_hook_script post-install, and
      pre-clean
    - updated doc/webapp.eclass.5.xml - document webapp_hook_script()

  * Enhancement: you can now configure which user & group will own files
    that are not owned by the web server or the config user
    - because we install symlinks everywhere, this is something you have
      to configure before installing the master copy with emerge
    - updated config/webapp-config to include VHOST_DEFAULT_UID and
      VHOST_DEFAULT_GID
    - updated sbin/webapp-config to chown directories to VHOST_DEFAULT_UID:
      VHOST_DEFAULT_GID.  Also all symlinks created by webapp-config will
      be owned by this uid/gid combo too
    - updated doc/webapp-config.5.xml to document VHOST_DEFAULT_UID and
      VHOST_DEFAULT_GID
    - updated eclass/webapp.eclass to chown files and directories to
      VHOST_CONFIG_UID and VHOST_CONFIG_GID

  * Work In Progress: xml configuration files
    - the plan is to replace the various metadata files in 
      /usr/share/webapps/$PN/$PVR with a single metadata.xml.  This will
      ease the transition to webapp-config v2, and give us new capabilities
      that we currently don't have
    - step 1 of this plan is to create some xsl stylesheets that we can
      apply to the metadata.xml.  we'll feed these through xsltproc, and
      feed the output of that into webapp-config's internal metadata cache
    - step 2 of this plan is to create some xsl stylesheets that will allow
      us to add files and directories to metadata.xml
    - step 3 of this plan is to create some xsl stylesheets that will allow
      us to add metadata to metadata.xml
    - at this point, we'll have enough capabilities to replace webapp-config's
      metadata files with a single metadata.xml file ;-)

14th May 2004
-------------

  * Enhancement: hook into pkg_prerm(), to remove all installed copies
    of the package that Portage is about to remove
    - requires a change to the contents of the .webapp file that lives
      in the install directory of virtual copies
    - we can't remove any virtual copies created by webapp-config-1.8 or
      less using this method.  Maybe I should rethink how this will work?
    - updated sbin/webapp-config to include install host and directory
      in future .webapp files
    - updated eclass/webapp.eclass to look in the .webapp files, and if
      possible to remove all the virtual copies (not working yet!!)

  * Enhancement: webapp-config should never die() after verifying all params
    - this means that it *will* overwrite files not under it's control
    - added by popular request
    - updated sbin/webapp-config

  * Bug fix: webapp-config --list-installs only worked when used with
    wildcards
    - updated sbin/webapp-config

13th May 2004
-------------

  * Bug fix: if installing into a directory that does NOT contain a webapp,
    output a warning and refuse to install
    - updated pkg_setup() in config/webapp.eclass
  * Bug fix: no longer delete the master copy directory when upgrading
    - updated webapp_getinstalltype() in config/webapp.eclass
  * Enhancement: if USE=-vhosts, packages are upgraded properly
    - old versions of the package are auto-removed

12th May 2004
-------------

  * Enhancement: tell people what to do when USE=vhosts is on
    - updated eclass/webapp.eclass

  * Bug fix: webapp-config now allows you to set $MY_HTDOCSDIR to be
    server-owned or config-owned as necessary.
    - updated sbin/webapp-config

11th May 2004
-------------

  * Version changed to 1.9dev
    - updated sbin/webapp-config

  * Enhancement: generate HTML versions of the man pages
    - updated doc/Makefile to build HTML as well as man pages
    - I would build PDF as well, but Gentoo's version of xmlto seems to be
      missing a dependency or two for that

  * Enhancement: drop-in webserver config support
    - packages (such as trac) that need to add configuration files for
      webservers can do so by calling the webapp_server_config() function
      in the ebuild.
    - updated eclass/webapp-config to add new webapp_server_config() function
    - updated doc/webapp.eclass.5.xml to document new function

Version 1.8 - 11th May 2004
===========================

11th May 2004
-------------

  * Urgent bugfix - webapp-config -U broken
    - updated sbin/webapp-config to only call fn_setinstalldir when not
      upgrading

  * Added subversion tags for webapp-config 1.6 and webapp-config 1.7

  * Version updated to 1.8

10th May 2004
-------------
  
  * Maintenance - ebuilds that use the webapp eclass now depend on
    webapp-config v1.7
    - updated eclass/webapp.eclass

2nd May 2004
------------

  * Enhancement - catch common ebuild problems in webapp.eclass
    - catches ebuilds that set SLOT themselves
    - catches ebuilds that do not call webapp_src_install()

Version 1.7 - 1st May 2004
==========================

30th April 2004
---------------

  * Bug fix - directories were always installed as 'root-owned'
    - updated sbin/webapp-config
    - another feature broken by the ${D} changes in webapp-config-1.3

  * Enhancement - old packages are removed when USE-vhosts
    - portage wouldn't normally remove them, because the eclass SLOTs
      every installed package (deliberately)
    - updated eclass/webapp.eclass

Version 1.6 - 29th April 2004
=============================

29th April 2004
---------------

  * Bug fix - correctly select install or upgrade mode when USE=-vhosts
    - updated webapp_pkg_postinst in eclass/webapp-config

  * Bug fix - install config files as files, not symlinks
    - updated eclass/webapp.config.  This got broken when we changed how
      we used ${D} in webapp-config-1.3

  * Bug fix - install into /var/www/localhost when USE=-vhosts
    - grrr - I must be more careful when moving code between my machines
    - updated eclass/webapp.eclass to use the -h switch once more

  * Bug fix - examples/phpmyadmin* ebuilds did not call webapp_src_preinst

  * Bug fix - added missing uid and gids for Apache server
    - updated lib/servers/apache-basic.sh

  * Changed behaviour - -d is now relative from htdocs dir
    - requested by too many to count ;-)
    - updated sbin/webapp-config
    - updated doc/webapp-config.8.xml
    - updated config/webapp-config
    - updated eclass/webapp.eclass
    - updated lib/servers/apache-basic.sh

  * New feature - --show-postinst
    - requested by Rob Holland
    - re-displays the post-installation instructions for an installation
    - required changes to sbin/webapp-config
    - updated doc/webapp-config.8.xml to match

  * New feature - --pretend mode
    - shows where the install would occur, and then bails
    - updated sbin/webapp-config to make --pretend an alias for --bug-report
    - updated doc/webapp-config.8.xml

Version 1.5 - 28th April 2004
=============================

28th April 2004
---------------

  * Bug fix - do not attempt to install cgi-bin's twice
    - updated lib/servers/apache-basic.sh to only install from htdocs
      and hostroot.  The cgi-bin directory is under hostroot, and will
      always be installed when hostroot is installed

  * Eclass now requires webapp-config-1.5
    - the eclass is shipped as part of the Portage tree

26th April 2004
---------------

  * Version change to 1.5dev

  * Bug fix - package upgrades work if you use USE=-vhost
    - updated sbin/webapp-config to add new --show-installed switch
    - updated eclass/webapp.eclass's pkg_postinst() function to detect
      a previously-installed copy of the package, and to change the
      flags to webapp-config appropriately
    - updated doc/webapp-config.8.xml to add new --show-installed switch

Version 1.4 - Released 23rd April 2004
======================================

  * Version change to 1.4

  * Bug fix - portage removes ${D} between a compile and an install
    - updated eclass/webapp.eclass - added new function webapp_src_preinst()
      to create the necessary directories in ${D}
    - updated doc/webapp.eclass.5.xml to cover webapp_src_preinst()
    - updated examples/phpmyadmin* to use webapp_src_preinst()

  * Bug fix - coping with ${D}
    - updated eclass/webapp.eclass so that webapp_checkfileexists() now
      uses $2 like it is supposed to

Version 1.3 - Released 23rd April 2004
======================================

23rd April 2004
---------------

  * Version change to 1.3

  * Removed the automatic ${D} from variables defined in the config file
    - removed all trace of ${D} from config/webapp-config
    - updated eclass/webapp.eclass to prepend ${D} where necessary
    - updated examples/phpmyadmin-2.5.4-r1 to use ${D} where necessary
    - updated examples/phpmyadmin-2.5.4-r2 to use ${D} where necessary too

  * Another fix for USE=-vhosts
    - updated eclass/webapp.eclass to always install webapps into
      /var/www/localhost/htdocs; ie VHOST_HOSTNAME is ignored

  * Auto-install webapp-config support
    - updated eclass/webapp.eclass to DEPEND on net-www/webapp-config 1.3
      or later.

Version 1.2 - Released 23rd April 2004
======================================

20th April 2004
---------------

  * Version change to 1.2
    - updated in sbin/webapp-config

  * Bug fix for webapp.eclass
    - moved the test for /etc/vhosts/webapp-config from the global scope
      into the pkg_setup function

  * Bug fix for webapp.eclass(5)
    - changed the SYNOPSIS from 'inherit webapp.eclass' to 'inherit eclass'

  * Improved output for fatal errors
    - updated sbin/webapp-config to always accurately trap when -d is missing
      from a -C operation
    - updated lib/libsh.sh to leave the user in no doubt whatsoever that
      the script has exited with a fatal error

  * Improved error handling for unusual cases
    - updated sbin/webapp-config to ensure that missing contents files and
      install databases are trapped and handled correctly

Version 1.1 - Released 14th April 2004
======================================

14th April 2004
---------------

  * Released webapp-config 1.1

13th April 2004
---------------

  * Completed webapp.eclass(5) man page.  Not the best document I've ever
    written, but it is a start.  Hopefully someone will submit patches or
    something to improve it.

  * Improved webapp.eclass, to match the documentation
    - now exports pkg_postinst(), rather than pkg_config() (doh!)

  * New support for post-installation instructions
    - new webapp_postinst_txt() in the eclass, which adds a text file
      containing post-install instructions
    - updated sbin/webapp-config to display any post-install instructions
      that exist
    - updated example ebuilds to support the new post-install instructions
    - this support will need reviewing; output the file to the screen at the
      end of the ebuild sucks a bit, tbh - but at least it's a start

  * Moved /var/cache/webapps to /var/db/webapps
    - /var/cache is for temporary files only
    - updated config/webapp-config

  * Support for NOT having the vhosts USE flag set didn't work.  It does now.
    - fixed pkg_postinst() in eclass/webapp.eclass

7th April 2004
--------------

  * Completed webapp-config(5) man page

6th April 2004
--------------

  * Completed webapp-config(8) man page

  * Changed behaviour of install (-I mode)

    - updated sbin/webapp-config so that --virtual-files and --force-virtual
      have no effect on config files.  They are always copied into the install
      directory.

5th April 2004
--------------

  * The example phpmyadmin ebuild now SLOTs correctly (doh)

  * Changed the behaviour of upgrade (-U mode)

    - update sbin/webapp-config to only automatically overwrite all files
      that have never ever been changed.  If the md5 is different, the
      file is config-protected instead.
    - timestamps are no longer used to decide whether upgrade can replace
      a file or not.  Only the md5 is used.  We still record timestamps
      in the contents file, but for the moment they are no longer used.
    - updated webapp-config.8.xml man page to match

  * Fixed a bug in upgrades (-U mode)

    - Loops that performed tests on parent directories became infinite loops
      if they were given absolute paths to examine.  This has been fixed.

  * Man page gets ever closer to completion

    - finished the Protected Configuration Files section
    - added new Contents File section

31st March 2004
---------------

  * Manual page for webapp-config(8) drafted
  * Added new -V switch (alias for --verbose)

29th March 2004
---------------

  * Continuing work for new 'installs' file

    - updated eclass/webapp.eclass to create /var/cache/webapps/${PN}/${PVR}
      directory.  This is where the 'installs' file will now live, so that
      /usr can be mounted read-only
    - updated config/webapp-config to look for the 'installs' file under
      the /var/cache/webapps/${PN}/${PVR} directory
    - updated sbin/webapp-config to look for the 'installs' file under
      the /var/cache/webapps/${PN}/${PVR} directory
    - added new 'libsh_file_isempty()' function to test whether a file
      is empty (zero length) or not
    - empty 'installs' files are now removed during webapp-config -C
    - I'm happy that --list-installs is now working as intended

  * Fixed --bug-report switch (it works now ;-)

26th March 2004
---------------

  * Bug fix for --list-servers not working at all

  * Continuing work for new 'installs' file

    - added new switch --list-installs to webapp-config

  * Added new 'verbose' output mode.  The idea is that, without this switch,
    as much output as possible should be fit to feed into other command-line
    programs.

    - added new global G_VERBOSE to webapp-config
    - added new --verbose switch to webapp-config
    - added libsh_everbose to lib/libsh.sh

24th March 2004
---------------

  * Added support for new 'installs' file inside the master copy, for keeping
    track of the virtual installs that have been made

    - file is created, updated, and destroyed by webapp-config.  We can't
      do this in the webapp.eclass, because Portage (correctly) will notice
      that it has been changed and won't remove it during an emerge -C.
    - added a new G_INSTALL_TIMESTAMP global to webapp-config, to tell us
      when an install was made
    - the fn_ws_install_verify() and fn_ws_clean_verify() now make sure that
      G_INSTALLDIR is an absolute path, even if the user passed it in as
      a relative path.  We use the install path as the primary key inside
      our 'installs' file
    - added --list-installs to the help output.  Function not implemented
      yet.

  * Updated webapp.eclass to install a webapp into $VHOSTS_ROOT when the
    'vhosts' USE flag is NOT set.  Previously the path was hard-coded.

  * Moved the default location of the webapp-config config file from
    /etc/conf.d to /etc/vhosts.
